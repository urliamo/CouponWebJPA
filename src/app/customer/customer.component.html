<h2 class="myName" *ngIf="myName">Welcome: <strong>{{myName}}</strong></h2>
<hr class="accessory">

<div *ngIf="amountCoupons" class="amount">
  <br>
  <p>
    Coupons amount: <span class="dot"> {{amountCoupons}}</span>
  </p>
</div>

<div>

  <button (click)="logOut()" class="angle">Log out</button>

</div>

<div class="center">

  <br>
  <button (click)="isToggleCouponWars()">-COUPON WARS-</button><span> | </span>
  <button (click)="getUser()">Show user info</button><span> | </span>
  <button (click)="isToggleUpdateCustomer()">Update your customer</button><span> | </span>
  <button (click)="getAllCoupons()">Show all coupons to buy</button><br>
  <button (click)="getCustomerPurchases()">Get all purchases</button><span> | </span>
  <button (click)="getCustomerCouponsByCustomerId()">Get my coupons</button> <span> | </span>
  <button (click)="isToggleGetCustomerCouponsByCategory()">Get all coupons by category</button><span> | </span>
  <button (click)="isToggleGetCustomerCouponsByMaxPrice()">Get all coupons by max price</button>

  <br><br>

  

  <div *ngIf="toggleGetUser">

    <div *ngIf="user">

      User name: {{user.userName}} <br>
      Password: {{user.password}} <br>

    </div>

  </div>

  <div *ngIf="toggleGetCustomerPurchases">

    <div *ngIf="customerPurchases">

      <table border="1" align="center">
        <tr>
          <th>coupon id</th>
          <th>amount</th>
          <th>date</th>
          <th>delete purchase</th>
        </tr>
        <tr *ngFor="let purchase of customerPurchases ; let index = index">
          <td>{{purchase.coupon.couponId}}</td>
		  <td>{{purchase.amount}}</td>
		  <td>{{purchase.date}}</td>
          <td><button (click)="deletePurchaseById(purchase.purchaseID,purchase.amount,index)"
              class="angle">delete</button>
          </td>
        </tr>
      </table>

    </div>

  </div>

  <div *ngIf="toggleGetCustomerCouponsByCustomerId">

    <div *ngIf="customerPurchases">

      <table border="1" align="center">
        <tr>
          <th>title</th>
          <th>description</th>
          <th>category</th>
          <th>amount</th>
          <th>price</th>
          <th>image</th>
          <th>delete purchase</th>
        </tr>

        <tr *ngFor="let purchase of customerPurchases ; let index = index">
          <td>{{purchase.coupon.title}}</td>
          <td>{{purchase.coupon.description}}</td>
          <td>{{purchase.coupon.category}}</td>
          <td>{{purchase.coupon.amount}}</td>
          <td>{{purchase.coupon.price}}</td>
          <td><img src="/assets/pictures/{{purchase.coupon.image}}" class="image"></td>
          <td><button (click)="deletePurchaseById(purchase.coupon.couponId,purchase.coupon.amount,'id',index)" class="angle">delete</button>
          </td>
        </tr>
      </table>

    </div>

  </div>

  <div *ngIf="toggleGetCustomerCouponsByCategory">

    <br>
    Enter category: <select [(ngModel)]="category">

      <option *ngFor="let category of categories" value="{{category}}">{{category}}</option>

    </select><br>

    <button (click)="getCustomerCouponsByCategory()">Get all coupons by category</button>

    <div *ngIf="customerPurchases">

      <table border="1" align="center">
        <tr>
          <th>title</th>
          <th>description</th>
          <th>category</th>
          <th>amount</th>
          <th>price</th>
          <th>image</th>
          <th>delete purchase</th>
        </tr>

        <tr *ngFor="let purchase of customerPurchases ; let index = index">
          <td>{{purchase.coupon.title}}</td>
          <td>{{purchase.coupon.description}}</td>
          <td>{{purchase.coupon.category}}</td>
          <td>{{purchase.coupon.amount}}</td>
          <td>{{purchase.coupon.price}}</td>
          <td><img src="/assets/pictures/{{purchase.coupon.image}}" class="image"></td>
          <td><button (click)="deletePurchaseById(purchase.coupon.couponId,purchase.amount,'category',index)"
              class="angle">delete</button>
          </td>
        </tr>
      </table>

    </div>

  </div>

  <div *ngIf="toggleGetCustomerCouponsByMaxPrice">

    Enter max price: <input type="number" [(ngModel)]="maxPrice"><br>
    <button (click)="getCustomerCouponsByMaxPrice()">Get all coupons by max price</button>

    <div *ngIf="customerPurchases">

      <table border="1" align="center">
        <tr>
          <th>title</th>
          <th>description</th>
          <th>category</th>
          <th>amount</th>
          <th>price</th>
          <th>image</th>
          <th>delete purchase</th>
        </tr>

        <tr *ngFor="let purchase of customerPurchases ; let index = index">
          <td>{{purchase.coupon.title}}</td>
          <td>{{purchase.coupon.description}}</td>
          <td>{{purchase.coupon.category}}</td>
          <td>{{purchase.coupon.amount}}</td>
          <td>{{purchase.coupon.price}}</td>
          <td><img src="/assets/pictures/{{purchase.coupon.image}}" class="image"></td>
          <td><button (click)="deletePurchaseById(purchase.purchaseID,purchase.amount,'maxPrice',index)"
              class="angle">delete</button>
          </td>
        </tr>
      </table>

    </div>

  </div>

  <div *ngIf="toggleGetAllCoupons">

    <div *ngIf="allCoupons">
      
      Enter amount: <input type="number" [(ngModel)]="amount">

      <table border="1" align="center">

        <tr>
          <th>title</th>
          <th>description</th>
          <th>category</th>
          <th>amount</th>
          <th>price</th>
          <th>image</th>
          <th>purchase</th>
        </tr>

        <tr *ngFor="let coupon of allCoupons ; let index = index">
          <td>{{coupon.title}}</td>
          <td>{{coupon.description}}</td>
          <td>{{coupon.category}}</td>
          <td>{{coupon.amount}}</td>
          <td>{{coupon.price}}</td>
          <td><img src="/assets/pictures/{{coupon.image}}" class="image"></td>
          <td><button (click)="purchaseCoupon(coupon.couponId,index)" class="angle">purchase coupon</button></td>
        </tr>

      </table>

    </div>
  </div>

  <div *ngIf="toggleUpdateCustomer">

    Enter user name: <input type="text" [(ngModel)]="userName"> <br>
    Enter password: <input type="password" [(ngModel)]="password"><br>
    Enter first name: <input type="text" [(ngModel)]="firstName"> <br>
    Enter last name: <input type="text" [(ngModel)]="lastName"> <br>
    Enter email: <input type="email" [(ngModel)]="email"> <br>
    <button (click)="updateCustomer()">Update your customer</button>

  </div>

  <button style="background-color:red" (click)="deleteCustomer()">Delete your account</button>

</div>

 
	<div *ngIf="toggleCouponWars">
		<div *ngIf="opponent">
		<br>
		your opponent is: {{opponent.firstName}} {{opponent.lastName}}
		<br>

		<button (click)="fightOpponent(opponent.customerId)">fight opponnent!</button>

		<div *ngIf="opponentCoupon">
			<br>
			opponents' coupon:
			<br>
		<table border="1" align="center">
			<tr>
			<th>title</th>
			<th>price</th>
			<th>image</th>
			
			</tr>

			<tr>
			<td>{{opponentCoupon.title}}</td>
			<td>{{opponentCoupon.price}}</td>
			<td><img src="/assets/pictures/{{opponentCoupon.image}}" class="image"></td>
			</tr>
		</table>
	<br>
			your coupon:
			<br>
		<table border="1" align="center">
			<tr>
			<th>title</th>
			<th>price</th>
			<th>image</th>
			
			</tr>

			<tr>
			<td>{{customerCoupon.title}}</td>
			<td>{{customerCoupon.price}}</td>
			<td><img src="/assets/pictures/{{customerCoupon.image}}" class="image"></td>
			</tr>
		</table>
		</div>

	</div>
  </div>